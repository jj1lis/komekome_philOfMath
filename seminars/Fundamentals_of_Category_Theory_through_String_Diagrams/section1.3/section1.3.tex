\documentclass[uplatex,a4paper,dvipdfmx,aspectratio=169,10pt]{beamer}

\input{slidesettings.tex}

\title{『ストリング図で学ぶ圏論の基礎』勉強会}
\subtitle{\S 1.3 自然変換}
\author{山田鈴太}
\institute[電通大院 M1]{電気通信大学大学院情報理工学研究科 博士前期課程1年}
\date{}

\renewcommand{\thefootnote}{*\arabic{footnote}}
\renewcommand{\theenumi}{(\arabic{enumi})}

\begin{document}
\begin{frame}
    \titlepage
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手
    \begin{block}{定義1.66 (自然変換)}
        $\alpha$が$F$から$G$への\alert{自然変換} (natural transformation) $\define$ 以下の条件を満たす
        \begin{enumerate}[(1)]
            \item $\alpha$は各$a \in \Ccal$で添字付けられた射の集まり
                $\left\{
                    % \vcenter{\hbox{
                    \begin{tikzcd}[cramped]
                        Fa \arrow[r, "\alpha_a"]& Ga
                    \end{tikzcd}
                    % }}
                \right\}_{a \in \Ccal}$
            \item 任意の$a, b \in \Ccal$と$f \colon a \to b$に対して$Gf \circ \alpha_a = \alpha_b \circ Ff$（\alert{自然性}, naturality）
        \end{enumerate}
    \end{block}
    \begin{itemize}
        \item $\alpha$が$F$から$G$への自然変換であることを$\alpha \colon F \Rightarrow G$と書く
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手
    \begin{block}{定義1.66 (自然変換)}
        \begin{enumerate}[(1)]
            \item $\alpha$は各$a \in \Ccal$で添字付けられた射の集まり
                $\left\{
                    % \vcenter{\hbox{
                    \begin{tikzcd}[cramped]
                        Fa \arrow[r, "\alpha_a"]& Ga
                    \end{tikzcd}
                    % }}
                \right\}_{a \in \Ccal}$
                \begin{equation}
                    \vcenterinput{figure01.tex} \quad := \quad \left\{
                        \vcenterinput{figure02.tex} \quad := \quad \vcenterinput{figure03.tex}
                    \right\}_{a \in \Ccal}
                    \tag{1.67}
                \end{equation}
        \end{enumerate}
    \end{block}
    \begin{itemize}
        \item $\alpha$を構成する各射$\alpha_a$を$\alpha$の\alert{成分} (component) と呼ぶ
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    \begin{equation}
        \vcenterinput{figure01.tex} \quad := \quad \left\{
            \vcenterinput{figure02.tex} \quad := \quad \vcenterinput{figure03.tex}
        \right\}_{a \in \Ccal}
        \tag{1.67}
    \end{equation}
    \begin{itemize}
        \item 一番右の図は少しわかりづらい気がする……
        \item 我々は既に関手の適用をストリング図として導入したのだった
    \end{itemize}
    \begin{equation}
        \vcenterinput{figure08.tex} \ = \vcenterinput{figure08-1.tex}, \quad \vcenterinput{figure09.tex} \ = \vcenterinput{figure09-1.tex} \tag{1.40}
    \end{equation}
    \begin{itemize}
        \item ならばこうしてしまってもよいのでは？
    \end{itemize}
    \begin{equation}
        \vcenterinput{figure01.tex} \quad := \quad \left\{
            \vcenterinput{figure02.tex} \quad := \quad \vcenterinput{figure03-1.tex}
        \right\}_{a \in \Ccal}
        \tag{1.67'}
    \end{equation}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手
    \begin{block}{定義1.66 (自然変換)}
        \begin{enumerate}[(2)]
            \item 任意の$a, b \in \Ccal$と$f \colon a \to b$に対して \underline{$Gf \circ \alpha_a = \alpha_b \circ Ff$}（\alert{自然性}, naturality）
                \begin{equation}
                    Gf \circ \alpha_a = \alpha_b \circ Ff \quad \rightleftarrows \quad \vcenterinput{figure04.tex} \quad = \quad \vcenterinput{figure05.tex} \tag{1.68}
                \end{equation}
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手，
    $\alpha \colon F \Rightarrow G$は自然変換
    \begin{itemize}
        \item 自然性$Gf \circ \alpha_a = \alpha_b \circ Ff$は次のようにも表せる
    \end{itemize}
    \begin{gather*}
        \vcenterinput{figure04.tex} \ = \ \vcenterinput{figure05.tex} \quad \Leftrightarrow \quad \vcenterinput{figure06.tex} \ = \ \vcenterinput{figure07.tex} \tag{nat} \\
        \text{ただし}\ \vcenterinput{figure02.tex} \ = \ \vcenterinput{figure03.tex}\ \text{を思い出す}
    \end{gather*}
    \begin{itemize}
        \item $f$が$\alpha$を素通りして縦方向に動ける
            \begin{itemize}
                \item \alert{スライディング則}
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    $\Ccal, \Dcal$は圏，
    $F \colon \Ccal \to \Dcal$は関手
    % $\alpha \colon F \Rightarrow G$は自然変換
    \begin{itemize}
        \item 各$a \in \Ccal$に対して$Fa$の恒等射$1_{Fa}$を集めると，
            $1_F := \left\{
                % \vcenter{\hbox{
                \begin{tikzcd}[cramped]
                    Fa \arrow[r, "1_{Fa}"]& Fa
                \end{tikzcd}
                % }}
            \right\}_{a \in \Ccal}$
            は$F$の\alert{恒等自然変換}
            \begin{itemize}
                \item 実際，以下の通り各$a \in \Ccal$について自然性の条件を満たす
            \end{itemize}
    \end{itemize}
    \vspace{1em}
    \begin{equation*}
        \vcenterinput{figure10.tex} \ = \ \vcenterinput{figure09.tex} \ = \ \vcenterinput{figure11.tex}
    \end{equation*}
\end{frame}

\begin{frame}[fragile]{1.3.1 自然変換の定義}
    \begin{align*}
        \vcenterinput{figure10.tex} \ &= \ \vcenterinput{figure10-1.tex} \\ 
                                      &= \ \vcenterinput{figure09-1.tex}\ \left(=\ \vcenterinput{figure09.tex} \right) \\ 
                                      &= \ \vcenterinput{figure11-1.tex}\ = \ \vcenterinput{figure11.tex}
    \end{align*}
\end{frame}

\begin{frame}[fragile]{1.3.2 自然変換の対象への作用と射への作用}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手，
    $\alpha \colon F \Rightarrow G$は自然変換
    \begin{itemize}
        \item $\alpha = \qty{\alpha_a}_{a \in \Ccal}$を，$\Ccal$の対象と射への作用と見なせる
    \end{itemize}
    \begin{description}
        \item[対象への作用:] $\Ccal$の対象を対応する$\alpha$の成分に写す
    \end{description}
    \begin{equation*}
        \begin{array}{cccl}
            \ob \Ccal & \to & \Dcal(Fa, Ga) & \subseteq \mor \Dcal \\
            a & \mapsto & \alpha_a
        \end{array}
    \end{equation*}
    \begin{description}
        \item[射への作用:] $\alpha$と射$f$を「横に並べる」
    \end{description}
    \begin{equation*}
        \begin{array}{rcccl}
            \mor \Ccal \supseteq & \Ccal(a, b)  & \to       & \Dcal(Fa, Gb) & \subseteq \mor \Dcal \\
                                 & f            & \mapsto   & \alpha \bullet f
        \end{array}
    \end{equation*}
\end{frame}

\begin{frame}[fragile]{1.3.2 自然変換の対象への作用と射への作用}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手，
    $\alpha \colon F \Rightarrow G$は自然変換
    \begin{description}
        \item[射への作用:] $\alpha$と射$f$を「横に並べる」
    \end{description}
    \begin{equation*}
        \begin{array}{rcccl}
            \mor \Ccal \supseteq & \Ccal(a, b)  & \to       & \Dcal(Fa, Gb) & \subseteq \mor \Dcal \\
                                 & f            & \mapsto   & \alpha \bullet f
        \end{array}
    \end{equation*}
    \begin{block}{$\alpha \bullet f$の定義}
        \begin{equation*}
            \begin{array}{ccccc}
                \alpha \bullet f & := & Gf \circ \alpha_a & = & \alpha_b \circ Ff \\
                                 & & \rotatebox{90}{$\leftrightarrows$} \\
                \vcenterinput{figure12.tex} & := &  \vcenterinput{figure04.tex} & = & \vcenterinput{figure05.tex}
            \end{array}
        \end{equation*}
    \end{block}
    \begin{itemize}
        \item 右の等号は単に自然性の条件
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{1.3.2 自然変換の対象への作用と射への作用}
    $\Ccal, \Dcal$は圏，
    $F, G \colon \Ccal \to \Dcal$は関手，
    $\alpha \colon F \Rightarrow G$は自然変換
    \begin{description}[対象への作用:]
        \item[対象への作用:] $a \mapsto \alpha_a$
        \item[射への作用:] $f \mapsto \alpha \bullet f := Gf \circ \alpha_a = \alpha_b \circ Ff$
    \end{description}
    % \vspace{1em}

    \begin{itemize}
        \item 自然変換$\alpha$は各$a \in \Ccal$に対する要素の集まり$\qty{\alpha_a}_{a \in \Ccal}$
            \begin{itemize}
                \item 対象への作用が定まれば，そこから自然変換を一意に得られる
            \end{itemize}
        \item よって射への作用は冗長な情報とも言える
        \item 自然変換の射への作用は，関手のそれと対応するものと考えてもよい
    \end{itemize}

    % \begin{columns}
    %     \begin{column}{0.3\textwidth}
            \begin{equation*}
                \begin{tikzcd}[sep=large]
                    \Ccal \arrow[r, bend left=45, "F"] \arrow[r, bend left=40, phantom, ""' name=F1] \arrow[r, bend right=45, "G"'] \arrow[r, bend right=40, phantom, "" name=F2] \arrow[Rightarrow, from=F1, to=F2, "\alpha"] & \Dcal
                \end{tikzcd}
            \end{equation*}
        % \end{column}
        % \begin{column}{0.7\textwidth}
            \begin{table}[H]
                \centering
                \begin{tabular}{ccc}
                    \hline
                    入力                  & $F$の出力                 & $\alpha$の出力                          \\ \hline
                    % $a \in \Ccal$       & $Fa \in \Dcal$         & $\alpha_a \in \Dcal(Fa, Ga)$         \\
                    $a \in \Ccal$       & $Fa \in \Dcal$         & \begin{tikzcd} Fa \arrow[r, "\alpha_a"] & Ga \end{tikzcd}         \\
                    % $f \in \Ccal(a, b)$ & $Ff \in \Dcal(Fa, Fb)$ & $\alpha \bullet f \in \Dcal(Fa, Gb)$ \\ \hline
                    \begin{tikzcd} \phantom{F}a \arrow[r, "f"] & b\phantom{G} \end{tikzcd} & \begin{tikzcd} Fa \arrow[r, "Ff"] & Fb \end{tikzcd} & \begin{tikzcd} Fa \arrow[r, "\alpha \bullet f"] & Gb \end{tikzcd} \\ \hline
                \end{tabular}
                % \caption{対応}
                \label{tab:functor_nt_output}
            \end{table}
    %     \end{column}
    % \end{columns}
\end{frame}

\begin{frame}[fragile]{1.3.3 自然変換の例}
    \fbox{例1.49} 任意の対象は関手とみなせる：各$a \in \Dcal$に対して$\Delta_{\onebf}a \colon \onebf \to \Dcal;\, * \mapsto a$
    \begin{exampleblock}{\fbox{例1.72} 任意の射は自然変換とみなせる}
        $a, b \in \Dcal$をともに関手$\onebf \to \Dcal$とみる．

        任意の射$f \in \Dcal(a, b)$に対して，$\qty{f}_{* \in \onebf}$は自然変換$a \Rightarrow b$である．
    \end{exampleblock}

    \begin{equation*}
        \vcenterinput{figure13.tex} \ := \left\{\, \vcenterinput{figure14.tex} \,\right\}_{* \in \onebf}
    \end{equation*}
    以下のことに注意
    \begin{itemize}
        \item 対象$a$と$b$は，関手$\Delta_{\onebf}a, \Delta_{\onebf}b \colon \onebf \to \Dcal$と同一視されている
        \item 厳密には$f$でなく集合$\qty{f}$が自然変換である
            \begin{itemize}
                \item とはいえ$\qty{f}$はただ1つの元$f$しか持たないので，こちらも同一視できる
            \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{1.3.3 自然変換の例}
    % \begin{tikzcd}[sep=large]
    %     \Ccal \arrow[r, bend left=30, "F"] \arrow[r, bend left=25, phantom, ""' name=F1] \arrow[r, bend right=30, "G"'] \arrow[r, bend right=25, phantom, "" name=F2] \arrow[Rightarrow, from=F1, to=F2, "\alpha"] & \Dcal
    % \end{tikzcd}で, $\Ccal$は離散圏
    $\Ccal$は離散圏，$\Dcal$は一般の圏
    \begin{exampleblock}{\fbox{例1.73} 任意の射の集まりは自然変換とみなせる}
        各$c \in \Ccal$に対して$\Dcal$の対象$a_c, b_c \in \Dcal$を任意に選び，射の集まり$\alpha := \left\{ \begin{tikzcd}[cramped] a_c \arrow[r, "\alpha_c"] & b_c \end{tikzcd}\right\}$も任意に選ぶ．

        このとき関手$F, G \colon \Ccal \to \Dcal$が
        \begin{align*}
            Fc := a_c, \quad Gc := b_c
        \end{align*}
        で一意に定まり，$\alpha$は自然変換$F \Rightarrow G$となる．
    \end{exampleblock}
    自然性の確認：
    \begin{enumerate}
        \item $\Ccal$の射は各$c \in \Ccal$の恒等射$1_c$のみ
        \item 各$1_c$に対して，$G 1_c \circ \alpha_c = \alpha_{c} \circ F 1_{c}$が成立
            \begin{equation*}
                G 1_c \circ \alpha_c = 1_{Gc} \circ \alpha_c = \alpha_c = \alpha_c \circ 1_{Fc} = \alpha_c \circ F 1_c
            \end{equation*}
    \end{enumerate}
\end{frame}

\begin{frame}[fragile]{1.3.3 自然変換の例}
    % \begin{tikzcd}[sep=large]
    %     \Ccal \arrow[r, bend left=30, "F"] \arrow[r, bend left=25, phantom, ""' name=F1] \arrow[r, bend right=30, "G"'] \arrow[r, bend right=25, phantom, "" name=F2] \arrow[Rightarrow, from=F1, to=F2, "\alpha"] & \Dcal
    % \end{tikzcd}で, $\Ccal$は離散圏
    % $\Ccal$は離散圏，$\Dcal$は一般の圏
    \fbox{例1.65} 双関手$F \colon \Ccal \times \Dcal \to \Ecal$と対象$c \in \Ccal$に対し，$F(c, -) \colon \Dcal \to \Ecal$を
    \begin{equation*}
        \begin{array}{rcccl}
            \ob \Dcal \ni & d & \mapsto & F(c, d) & \in \ob \Ecal \rlap{,} \\
            \mor \Dcal \ni & g & \mapsto & F(1_c, g) & \in \mor \Ecal
        \end{array}
    \end{equation*}
    と定めれば$F(c, -)$は関手
    \begin{exampleblock}{\fbox{例1.75}}
        $\Ccal$の任意の射\begin{tikzcd} c \arrow[r, "f"] & c' \end{tikzcd}に対して，射の集まり$F(f, -) := \qty{F(f, 1_d)}_{d \in \Dcal}$は

        自然変換$F(c, -) \Rightarrow F(c', -)$である．
    \end{exampleblock}
\end{frame}
\end{document}
